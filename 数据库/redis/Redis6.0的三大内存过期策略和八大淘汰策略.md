### Redis6.0.X 版本的三大内存过期策略和八大淘汰策略

Redis 安装上，如果不配置的话，默认就是按照你电脑的内存的大小。我们一般不会调整Redis的内存大小，如果调整也一般像HashMap的加载因子一样，也就是总内存的 3/4.

通过打开Redis.config的配置文件查看

```shell
maxmemory <bytes>
```

#### 三大过期策略

定时删除、惰性删除、定期删除。

**过期策略存在的原因：**

```
Redis不可能时时刻刻遍历所有被设置了有效时间的key,来检测数据是否已经达到了过期时间，然后对它进行删除
```

#### 定时删除

定时删除 又名 立即删除，能保证内存中的数据最大的新鲜度，因为它保证**过期键值会在过期后马上被删除**,其所占用的内存也会随之释放。但是立即删除对CPU 是不友好的，因为删除操作会占用CPU的时间，如果刚好碰上了CPU很忙的时候，比如正在做交集或者排序等计算时候，就会给cpu造成额外的压力，产生大量的性能消耗，同时也会影响数据的读取操作。

#### 惰性删除

数据达到过期时间，不做处理。等下次访问该数据时候，如果未过期，返回数据，如果过期，删除返回不存在。惰性删除的策略的缺点是，它对内存不是很友好，如果一个键已经过期，而这个键有保留在内存数据中，那么只要这个过期键不被删除，它所占用的内存就不会被释放。在使用惰性删除策略时，如果数据库中有非常多的过期键，而这些键恰好没有被访问到，那么他们也许永远不会被删除（除非用户手动执行flushdb），我们甚至可以将这种情况看做一种内存泄露，无用的垃圾数据占用了大量的内存，而服务器去不会自己去释放他们，这对于运行状态非常依赖内存的Redis服务来书肯定不是一个好消息。

#### 定期删除

定期删除策略是前两种的策略的折中：定期删除策略是每隔一段时间执行一次过期键的操作。