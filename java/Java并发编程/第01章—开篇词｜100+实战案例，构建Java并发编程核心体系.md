不知道你在工作过程中，是否遇到过这样的问题：

-   我的程序本地跑起来没有 Bug，但是一到多线程环境下就乱了；
-   并发编程好抽象，不知道该从何入手学习；
-   老大让我去优化接口，每次都没有头绪；
-   每次面试，问到并发编程就得跪；
-   JUC 的各个 API 都会用，但是不了解内部原理机制；
-   ……

如果你也被这些问题困扰过，那么你确实需要系统性学习下并发编程这个领域了。

早期我刚参加实习时，由于自身能力不足，对于技术的理解比较浅层，很多技术点也只是背过八股文，很少有机会深入接触并发编程在实战中的相关运用。后来。随着项目流量的增大以及接触到的技术组件日渐丰富，我发现很多框架或者自研组件的底层，都或多或少涉及到并发编程方面的技术点。

例如，在一些本地缓存组件中，当本地缓存过期后，需要从数据库加载数据，这个阶段中就会涉及到线程并发请求的处理；在设计事件通知组件的时候，需要涉及到异步处理的逻辑，而异步处理的核心则是和多线程相关；在一些高并发系统中，涉及到加锁逻辑时，我们可能要考虑锁的性能以及如何尽可能降低锁的影响粒度，等等。

于是，我便开始重视起并发编程这个领域的技术点了，在花费了大约三个月的时间系统性重温后，发现很多之前看不懂的东西又有了新的体会。同时在日常工作中也开始尝试将这些学习到的技术点落地到实际项目中，例如：

1.  从 0 到 1 搭建了上百容器节点的线程池监控体系；
1.  去落地了压测与限流的基础组件；
1.  遇到一些比较耗时的计算任务时，通过合理使用异步编程的某些技术点进行性能优化；
1.  理解了线程上下文的原理后，在分布式环境下定制 traceId 对请求链路进行监控；
1.  采用多线程+消息队列技术实现分库分表技术；
1.  利用 fork/join 技术去计算一些大量级数据任务；
1.  ……

在这个重新学习并发编程体系的过程中，**我建立了一套个人仓库，内部包含了大约上百个并发编程的案例，期间踩了不少的坑，同时也重构了好几遍自己的知识模型，并且也在企业中落地了一些实战项目。** 现在回过头来，感觉这是一笔不小的“财富”。

**并发编程代码案例仓库：**


![image.png](https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/182c6175156241bea0cedcd1ff82b80b~tplv-k3u1fbpfcp-watermark.image?)

我希望通过这本小册，能够用简单易懂的语言将这些技术的本质梳理出来，分享给大家，这一定会是一件非常有意义的事情。

## 课前约定

在开始本小册之前，我们需要先达成约定。

这个课程并不会一开始就介绍Java语言体系内的各种并发编程技术，而是会结合一些实际案例，让大家先对计算机的底层原理有一定认识，之后才开始进入到 Java 体系中的并发编程技术。

为什么不是上来就介绍 JDK 内部的各种并发组件原理呢？

我认为基本功决定了一个人对于高级知识的认知程度，**很多高级语言其实都是在对底层技术原理的封装**，虽然API名称会有所出入，但是如果你对底层足够了解的话，会发现其实它们大多数都是相通的。而且，**并发编程的很多设计与实现，都是源自于操作系统内部的需求所发明的**，例如管程、数据一致性、产生并发的原因等。

所以，在小册的前边几章里，我们会系统性梳理下计算机底层原理，能够让大家了解到，前辈在面对这些复杂问题时，会采用怎样的手段去解决，最终起到一个知其然并知其所以然，且有所悟的效果。

本小册的主要内容划分为以下 **3** 个模块：

-   **计算机原理篇**

这个模块的内容比较偏向于操作系统底层，当然，内容也并不是只有理论，部分案例的讲解会或多或少涉及到一些C++语言、汇编指令，在一些概念点的讲解上，还会让大家亲自参与到计算机底层原理的设计与实现中，这种场景能够加深大家对于底层原理的理解。

-   **Java并发编程原理篇**

这个模块主要是介绍Java并发编程领域常用到的一些技术原理。并发编程领域主要可划分为**锁、线程、设计模式**三个方向。

-   **锁方向**：这一模块主要介绍的是关于synchronized关键字在Open JDK中的源代码实现，以及锁升级原理，AQS的底层分析，以及wait,notify,notifyAll,Condition相关原理介绍。
-   **线程方向**：在这一模块中，主要围绕着线程背后的特性，以及线程的一些底层原理，线程本地变量等方面的分析。
-   **设计模式**：这一模块中我们重点介绍一些在并发编程模块中所使用到的一些设计思想，扩充下大家的知识视野。



-   **并发编程实战案例篇**

这个模块的重点就在实战演练了，我们会通过许多实战案例，去运用所学过的并发编程知识，帮助我们加深理解。其中设计了很多让大家感兴趣的应用场景，例如线程池监控、分布式链路id、分布式锁、本地缓存组件等等。这些场景中或多或少都会有并发编程的影子，在每一套实战案例的背后都会有配备好充足的代码和相关注释，方便大家阅后学习。

## 写在最后

看完了关于本小册内容的介绍，不知道你是否会有所心动。最后介绍一下我自己吧。

我是DannyIdea（小林），是掘金上另外一本小册《[Java开发者的RPC实战课](https://juejin.cn/book/7047357110337667076/section)》的作者，从事Java方向的技术研发，有社交、金融、直播方面的开发经验，平时喜欢钻研开源技术，负责过大型微服务系统重构的核心开发，有过团队的基础组件开发经验。

-   个人公众号：Idea的技术分享。
-   个人博客：https://blog.csdn.net/Danny_idea
-   我的码云：https://gitee.com/IdeaHome_admin

在这里我需要事先声明下，本人并不是什么大厂的资深架构师啥的，只是平时喜欢研究源代码、中间件技术，在业余时间里喜欢coding，所以那些冲着title来的朋友们请先三思。

在编写小册的过程中，可能会有一些小问题，如果各位亲爱的朋友有所疑惑，欢迎在评论区中指出。期待这本小册能让你有所收获！